<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deployment Workflow Configuration</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>    
    <div class="troubleshoot-panel">
        <button class="troubleshoot-btn" onclick="toggleTroubleshoot()">≡</button>
        <div class="troubleshoot-content" id="troubleshootPanel">
            <button class="close-troubleshoot" onclick="toggleTroubleshoot()">›</button>
            <br></br>
            <h4>Troubleshooting Guide</h4>
                <p>Failed to run Brazil<br>
                Likely to see at step 1. Solution: </p>
                <code>toolbox install brazilcli</code>
                <p>Failed to run Brazil after install Brazil<br>
                Solution: run command below replace xxxxx with any number between 40000-60000</p>
                <code>brazil prefs --key packagecache.port --value xxxxx --global</code>
                <p>How to drop a CR in any package<br>
                Get &lt;CR hash&gt; at<code>code.amazon.com</code>
                Then do<code>git rebase -i &lt;CR hash&gt;</code>
                Press i key. Then replace "pick" with "drop" with the CR you want to drop. Escape when done with edit. Save & quit:<code>:wq</code></p>
                <p>Auto custom builder tool section: 
                <button id="downloadBtn" class="download" onclick="downloadConfig()" style="display: none; vertical-align: center;">⭳</button></p>
                <p>Run command to open auto builder tool
                <code>autobuild</code></p>
                             
        </div>
    </div>
    
    <div class="container">
        <h1>WorkSpace & Workflow Builder</h1>
        <div id="configForm">
            <!-- General Inputs -->
            <div class="form-group">
                <label for="testDate">Test Date:</label>
                <input type="text" id="testDate" placeholder="Enter test date (YYYYMMDD)" oninput="updateWorkspaceTitle()">
            </div>
            <div class="form-group">
                <label for="testTitle">Test Title:</label>
                <input type="text" id="testTitle" placeholder="Enter test title" oninput="updateWorkspaceTitle()">
            </div>
            <div class="form-group">
                <label for="workspaceTitle">Workspace/Workflow Title:</label>
                <input type="text" id="workspaceTitle" placeholder="Workspace/Workflow title" readonly>
            </div>

            <!-- Subsystem Checkbox -->
            <div class="checkbox-container" style="display: flex; gap: 20px;">
                <label><input type="checkbox" id="stowCheckbox" onchange="toggleSection('stowSection')"> Stow</label>
                <label><input type="checkbox" id="bufferCheckbox" onchange="toggleSection('bufferSection')"> Buffer</label>
                <label><input type="checkbox" id="transferCheckbox" onchange="toggleSection('transferSection')"> Transfer</label>
            </div>

            <!-- Sections -->
            <div id="stowSection" style="display: none; margin-top: 15px; padding: 10px; border: 1px solid #ddd; border-radius: 5px; background-color: #f9f9f9;">
                <h3>Stow Section</h3>
                <div class="form-group">
                    <label for="stowWorkcellId">Workcell ID:</label>
                    <select id="stowWorkcellId">
                        <option value="">Select Workcell ID</option>
                        <option value="0203">α 2 1:1 0203</option>
                        <option value="0206">α 2 1:3 0206</option>
                        <option value="0207">α 2 1:3 0207</option>
                        <option value="0208">α 2 1:3 0208</option>
                        <option value="0303">β   1:1 0303</option>
                        <option value="0306">β   1:3 0306</option>
                        <option value="0307">β   1:3 0307</option>
                        <option value="0308">β   1:3 0308</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="stowEventId">Event ID: <a id="eventIdLink" class="build-tracking" href="#" target="tracking">Build Tracking</a></label>
                    <input type="text" id="stowEventId" placeholder="Event ID">
                </div>
                <div class="checkbox-container">
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="stowMainline" onchange="toggleMainline()">
                            <span>Mainline</span>
                            <span class="checkbox-tooltip">Select this box if engineer tell you to build mainline</span>
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="stowImageTag" onchange="toggleInput('stowImageTagInput')">
                            <span>Image Tag</span>
                            <span class="checkbox-tooltip">Select if you have any image tag need to swap</span>
                        </label>
                        <div id="stowImageTagInput" class="input-box">
                            <label for="stowImageTagValue">Enter Image Tag:</label>
                            <textarea id="stowImageTagValue" placeholder="Enter image tag"></textarea>
                        </div>
                    </div>
                    <div class="form-group" style="display: flex; align-items: center; gap: 10px;">
                        <label class="checkbox-label" style="display: flex; align-items: center; gap: 5px;">
                            <input type="checkbox" id="stowCherryPick" onchange="toggleCherryPickSection('stowCherryPickSection', 'stowAddBtn')">
                            <span>Cherry Pick Packages</span>
                            <span class="checkbox-tooltip">Select if you have any CR cherry pick</span>
                        </label>
                        <button id="stowAddBtn" style="display: none; background-color: #4CAF50; color: white; border: none; border-radius: 6px; padding: 0 10px; margin-top: 0px; margin-bottom: 5px; height: 24px; font-size: 12px; text-align: center; cursor: pointer;">Add Package</button>
                    </div>
                    <div id="stowCherryPickSection" style="display: none; margin-top: 10px;">
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="stowVsConfigPick" onchange="toggleInput('stowVsConfigPickInput')">
                                <span>Vulcan Stow Config</span>
                                <span class="checkbox-tooltip">Select if you have Vulcan Stow Config package CR</span>
                            </label>
                            <div id="stowVsConfigPickInput" class="input-box">
                                <label for="stowVsConfigPickValue">Enter Vulcan Config cherry pick value:</label>
                                <textarea id="stowVsConfigPickValue" placeholder=""></textarea>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="stowDeployArtifactsPick" onchange="toggleInput('stowDeployArtifactsPickInput')">
                                <span>Deployment Artifacts</span>
                                <span class="checkbox-tooltip">Select if you have Deployment Artifacts package CR</span>
                            </label>
                            <div id="stowDeployArtifactsPickInput" class="input-box">
                                <label for="stowDeployArtifactsPickValue">Enter Deploy Artifacts cherry pick value:</label>
                                <textarea id="stowDeployArtifactsPickValue" placeholder=""></textarea>
                            </div>
                        </div>
                        <div id="stowDynamicInputs"></div>
                    </div>
                </div>
            </div>

            <div id="bufferSection" style="display: none; margin-top: 15px; padding: 10px; border: 1px solid #ddd; border-radius: 5px; background-color: #f9f9f9;">
                <h3>Buffer Section</h3>
                <div class="form-group">
                    <label for="bufferWorkcellId">Workcell ID:</label>
                    <select id="bufferWorkcellId">
                        <option value="">Select Workcell ID</option>
                        <option value="0203">α 2 1:1 0203</option>
                        <option value="0206">α 2 1:3 0206</option>
                        <option value="0207">α 2 1:3 0207</option>
                        <option value="0208">α 2 1:3 0208</option>
                        <option value="0303">β   1:1 0303</option>
                        <option value="0306">β   1:3 0306</option>
                        <option value="0307">β   1:3 0307</option>
                        <option value="0308">β   1:3 0308</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="bufferEventId">Event ID: <a id="eventIdLink" class="build-tracking" href="#" target="tracking">Build Tracking</a></label>
                    <input type="text" id="bufferEventId" placeholder="Event ID">
                </div>
                <div class="checkbox-container">
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="bufferMainline" onchange="toggleMainline()">
                            <span>Mainline</span>
                            <span class="checkbox-tooltip">Select this box if engineer tell you to build mainline</span>
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="bufferImageTag" onchange="toggleInput('bufferImageTagInput')">
                            <span>Image Tag</span>
                            <span class="checkbox-tooltip">Select if you have any image tag need to swap</span>
                        </label>
                        <div id="bufferImageTagInput" class="input-box">
                            <label for="bufferImageTagValue">Enter Image Tag:</label>
                            <textarea id="bufferImageTagValue" placeholder="Enter image tag"></textarea>
                        </div>
                    </div>
                    <div class="form-group" style="display: flex; align-items: center; gap: 10px;">
                        <label class="checkbox-label" style="display: flex; align-items: center; gap: 5px;">
                            <input type="checkbox" id="bufferCherryPick" onchange="toggleCherryPickSection('bufferCherryPickSection', 'bufferAddBtn')">
                            <span>Cherry Pick Packages</span>
                            <span class="checkbox-tooltip">Select if you have any CR cherry pick</span>
                        </label>
                        <button id="bufferAddBtn" style="display: none; background-color: #4CAF50; color: white; border: none; border-radius: 6px; padding: 2px 10px; font-size: 12px; text-align: center; cursor: pointer;">Add Package</button>
                    </div>
                    <div id="bufferCherryPickSection" style="display: none; margin-top: 10px;">
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="bufferVsConfigPick" onchange="toggleInput('bufferVsConfigPickInput')">
                                <span>Vulcan Config</span>
                                <span class="checkbox-tooltip">Select if you have Vulcan Stow Config package CR</span>
                            </label>
                            <div id="bufferVsConfigPickInput" class="input-box">
                                <label for="bufferVsConfigPickValue">Enter Vulcan Config cherry pick value:</label>
                                <textarea id="bufferVsConfigPickValue" placeholder=""></textarea>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="bufferDeployArtifactsPick" onchange="toggleInput('bufferDeployArtifactsPickInput')">
                                <span>Deploy Artifacts</span>
                                <span class="checkbox-tooltip">Select if you have Deployment Artifacts package CR</span>
                            </label>
                            <div id="bufferDeployArtifactsPickInput" class="input-box">
                                <label for="bufferDeployArtifactsPickValue">Enter Deploy Artifacts cherry pick value:</label>
                                <textarea id="bufferDeployArtifactsPickValue" placeholder=""></textarea>
                            </div>
                        </div>
                        <div id="bufferDynamicInputs"></div>
                    </div>
                </div>
            </div>

            <div id="transferSection" style="display: none; margin-top: 15px; padding: 10px; border: 1px solid #ddd; border-radius: 5px; background-color: #f9f9f9;">
                <h3>Transfer Section</h3>
                <div class="form-group">
                    <label for="transferWorkcellId">Workcell ID:</label>
                    <select id="transferWorkcellId">
                        <option value="">Select Workcell ID</option>
                        <option value="0202">α 2 1:1 0202</option>
                        <option value="0205">α 2 1:3 0205</option>
                        <option value="0302">β   1:1 0302</option>
                        <option value="0305">β   1:3 0305</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="transferEventId">Event ID: <a id="eventIdLink" class="build-tracking" href="#" target="tracking">Build Tracking</a></label>
                    <input type="text" id="transferEventId" placeholder="Event ID">
                </div>
                <div class="checkbox-container">
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="transferMainline" onchange="toggleMainline()">
                            <span>Mainline</span>
                            <span class="checkbox-tooltip">Select this box if engineer tell you to build mainline</span>
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="transferImageTag" onchange="toggleInput('transferImageTagInput')">
                            <span>Image Tag</span>
                            <span class="checkbox-tooltip">Select if you have any image tag need to swap</span>
                        </label>
                        <div id="transferImageTagInput" class="input-box">
                            <label for="transferImageTagValue">Enter Image Tag:</label>
                            <textarea id="transferImageTagValue" placeholder="Enter image tag"></textarea>
                        </div>
                    </div>
                    <div class="form-group" style="display: flex; align-items: center; gap: 10px;">
                        <label class="checkbox-label" style="display: flex; align-items: center; gap: 5px;">
                            <input type="checkbox" id="transferCherryPick" onchange="toggleCherryPickSection('transferCherryPickSection', 'transferAddBtn')">
                            <span>Cherry Pick Packages</span>
                            <span class="checkbox-tooltip">Select if you have any CR cherry pick</span>
                        </label>
                        <button id="transferAddBtn" style="display: none; background-color: #4CAF50; color: white; border: none; border-radius: 6px; padding: 2px 10px; font-size: 12px; text-align: center; cursor: pointer;">Add Package</button>
                    </div>
                    <div id="transferCherryPickSection" style="display: none; margin-top: 10px;">
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="transferVsConfigPick" onchange="toggleInput('transferVsConfigPickInput')">
                                <span>Vulcan Config</span>
                                <span class="checkbox-tooltip">Select if you have Vulcan Stow Config package CR</span>
                            </label>
                            <div id="transferVsConfigPickInput" class="input-box">
                                <label for="transferVsConfigPickValue">Enter Vulcan Config cherry pick value:</label>
                                <textarea id="transferVsConfigPickValue" placeholder=""></textarea>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="transferDeployArtifactsPick" onchange="toggleInput('transferDeployArtifactsPickInput')">
                                <span>Deploy Artifacts</span>
                                <span class="checkbox-tooltip">Select if you have Deployment Artifacts package CR</span>
                            </label>
                            <div id="transferDeployArtifactsPickInput" class="input-box">
                                <label for="transferDeployArtifactsPickValue">Enter Deploy Artifacts cherry pick value:</label>
                                <textarea id="transferDeployArtifactsPickValue" placeholder=""></textarea>
                            </div>
                        </div>
                        <div id="transferDynamicInputs"></div>
                    </div>
                </div>
            </div>

            <!-- Buttons -->
            <div id="actionButtons">
                <button id="generateBtn" onclick="generateSteps()">Guide Me!</button>
                <button id="regenerateBtn" class="update" onclick="regenerate()" style="display: none;">Regenerate</button>
                <button id="downloadBtn" class="download" onclick="downloadConfig()" style="display: none;">⭳</button>
            </div>

            <!-- Steps Guide -->
            <div id="stepsGuide" class="steps-container" style="display: none;">
                <div class="tab">
                    <button class="tablinks" id="stowTabBtn" onclick="openTab(event, 'StowTab')" style="display: none;">Stow</button>
                    <button class="tablinks" id="bufferTabBtn" onclick="openTab(event, 'BufferTab')" style="display: none;">Buffer</button>
                    <button class="tablinks" id="transferTabBtn" onclick="openTab(event, 'TransferTab')" style="display: none;">Transfer</button>
                </div>
                <div id="StowTab" class="tabcontent"><h3>Stow Section</h3><div id="stowSteps"></div></div>
                <div id="BufferTab" class="tabcontent"><h3>Buffer Section</h3><div id="bufferSteps"></div></div>
                <div id="TransferTab" class="tabcontent"><h3>Transfer Section</h3><div id="transferSteps"></div></div>
            </div>
        </div>
    </div>

    <button id="resetBtn" class="reset" onclick="resetForm()">&#10227;</button>
    <p class="version-text" id="version"></p>
    <script src="scripts.js"></script>
</body>
</html>